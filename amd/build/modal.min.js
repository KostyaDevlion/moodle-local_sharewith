define ("local_sharewith/modal",["jquery","core/templates","core/notification"],function(a,b,c){var d={modalWrapper:"#modalSharewith",modalContent:"#modalContentSharewith",triggerBtn:"#triggerModalSharewith",editMenu:".course-content li.activity [role=\"menu\"]",actionMenu:".course-content li.activity .actions .action-menu",actionBlock:".course-content li.activity .actions > div",menuSection:".course-content .section_action_menu [role=\"menu\"]"};return{template:{modalwrapper:"local_sharewith/modalwrapper",selector:"local_sharewith/selector",copyinstance:"local_sharewith/copyinstance",error:"local_sharewith/error",confirm:"local_sharewith/confirm",shareteacher:"local_sharewith/shareteacher",uploadactivity:"local_sharewith/uploadactivity"},actions:"",modalInit:!1,triggerBtn:"",modalContent:"",modalWrapper:"",addShareButtonEditMenu:function addShareButtonEditMenu(b){var c=M.util.get_string("use_activity","local_sharewith"),e=a(document).find(d.editMenu);e.each(function(){var d=a(this).children().last().clone();d.find(".menu-action-text").text(c);d.attr("href","#").attr("data-handler","openShareWith").attr("data-activitysending",b).removeAttr("data-action").addClass("sharingact_item");d.find(".icon").attr("title",c).attr("aria-label",c).removeAttr("class").addClass("icon fa fa-share-alt fa-fw");a(this).append(d)})},addShareButtonActivity:function addShareButtonActivity(){var b=a(document).find(d.actionMenu),c=M.util.get_string("share","local_sharewith");b.each(function(){var b=a("<button><i class = \"icon\"></i>"+c+"</button>");b.attr("data-handler","openShareWith").addClass("btn btn-outline-primary btn-sm");b.find(".icon").attr("title",c).attr("aria-label",c).addClass("fa fa-share-alt fa-fw");b.insertAfter(a(this))})},addCopySectionButton:function addCopySectionButton(){var b=M.util.get_string("eventsectioncopy","local_sharewith"),c=a(document).find(d.menuSection);c.each(function(){var c=a(this).children().last().clone();c.attr("href","#").attr("data-handler","selectCourseForSection");c.find(".menu-action-text").text(b);c.find(".icon").removeAttr("class").attr("title",b).attr("aria-label",b).addClass("icon fa fa-copy fa-fw");a(this).append(c)})},insertTemplates:function insertTemplates(a){this.actions=a;var e=this;return b.render("local_sharewith/modalwrapper",{}).done(function(a,c){if(!e.modalInit){b.appendNodeContents("body",a,c);e.modalInit=!0;e.modalWrapper=document.querySelector(d.modalWrapper);e.modalContent=document.querySelector(d.modalContent);e.triggerBtn=document.querySelector(d.triggerBtn)}}).fail(c.exception)},render:function render(a,d){var e=this;return b.render(a,d).done(function(a,c){b.replaceNodeContents(e.modalContent,a,c)}).fail(c.exception)},addActionNode:function addActionNode(){if(this.actions.sectioncopy){this.addCopySectionButton()}if(this.actions.activitycopy){this.addShareButtonEditMenu(this.actions.activitysending)}},addBtnSpinner:function addBtnSpinner(){a("#modalspinner").removeClass("d-none");a("#modalspinner").addClass("loading");a("#modalspinner").parent().prop("disabled",!0)},goBack:function goBack(){var a={activitysending:+this.actions.activitysending};this.render(this.template.selector,a)}}});
//# sourceMappingURL=modal.min.js.map
